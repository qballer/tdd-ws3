{"version":3,"sources":["auctionMessageTranslator.spec.js"],"names":[],"mappings":";;AAAA,OAAO,CAAC,oBAAoB,CAAC,CAAC,OAAO,EAAE,CAAC;AACxC,IAAI,wBAAwB,GAAG,OAAO,CAAC,iCAAiC,CAAC,CAAC;AAC1E,IAAI,WAAW,GAAG,OAAO,CAAC,sBAAsB,CAAC,CAAC,WAAW,CAAC;AAC9D,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC7B,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC;;AAEpC,IAAM,WAAW,GAAG,IAAI,CAAC;AACzB,IAAM,SAAS,GAAG,QAAQ,CAAC;;AAE3B,QAAQ,CAAC,iCAAiC,EAAE,YAAK;AAChD,KAAI,UAAU,CAAC;AACf,KAAI,eAAe,CAAC;AACpB,WAAU,CAAC,EAAE,EAAC,YAAM;AACnB,iBAAe,GAAG;AACjB,gBAAa,EAAG,KAAK,CAAC,GAAG,EAAE;AAC3B,eAAY,EAAG,KAAK,CAAC,GAAG,EAAE;GAC1B,CAAC;AACF,YAAU,GAAG,IAAI,wBAAwB,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;EACtE,CAAC,CAAC;;AAEH,GAAE,CAAC,mDAAmD,EAAE,YAAM;AAC7D,MAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,EAAC,KAAK,EAAE,QAAQ,EAAC,CAAC,CAAC;AAChD,YAAU,CAAC,cAAc,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;AAChD,QAAM,CAAC,eAAe,CAAC,aAAa,CAAC,UAAU,EAAE,+CAA+C,CAAC,CAAC;EAClG,CAAC,CAAC;;AAEH,GAAE,CAAC,4EAA4E,EAAE,YAAM;AACtF,MAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,EAAC,KAAK,EAAE,OAAO,EAAE,KAAK,EAAC,GAAG,EAAE,SAAS,EAAC,CAAC,EAAE,MAAM,EAAC,cAAc,EAAC,CAAC,CAAC;AAC9F,YAAU,CAAC,cAAc,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;AAChD,QAAM,CAAC,eAAe,CAAC,YAAY,CAAC,UAAU,EAAE,8CAA8C,CAAC,CAAC;AAChG,QAAM,CAAC,eAAe,CAAC,YAAY,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,eAAe,CAAC,EAAE,2EAA2E,CAAC,CAAC;EAClK,CAAC,CAAC;;AAEH,GAAE,CAAC,sEAAsE,EAAE,YAAM;AAChF,MAAI,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,EAAC,KAAK,EAAE,OAAO,EAAE,KAAK,EAAC,GAAG,EAAE,SAAS,EAAC,CAAC,EAAE,MAAM,EAAC,SAAS,EAAC,CAAC,CAAC;AACzF,YAAU,CAAC,cAAc,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC;AAChD,QAAM,CAAC,eAAe,CAAC,YAAY,CAAC,UAAU,EAAE,8CAA8C,CAAC,CAAC;AAChG,QAAM,CAAC,eAAe,CAAC,YAAY,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,EAAE,WAAW,CAAC,UAAU,CAAC,EAAE,qEAAqE,CAAC,CAAC;EACvJ,CAAC,CAAC;;AAGH,UAAS,CAAC,EAAE,EAAE,YAAM,EAEnB,CAAC,CAAC;CACH,CAAC,CAAC","file":"auctionMessageTranslator.spec.js","sourcesContent":["require('source-map-support').install();\nvar AuctionMessageTranslator = require('../src/AuctionMessageTranslator');\nvar PriceSource = require('../src/AuctionSniper').PriceSource;\nvar sinon = require('sinon');\nvar assert = require('chai').assert;\n\nconst UNUSED_CHAT = null;\nconst SNIPER_ID = 'sniper';\n\ndescribe('auction message translator test', () =>{\n\tvar translator;\n\tvar auctionListener;\n\tbeforeEach('',() => {\n\t\tauctionListener = {\n\t\t\tauctionClosed : sinon.spy(), \n\t\t\tcurrentPrice : sinon.spy()\n\t\t};\n\t\ttranslator = new AuctionMessageTranslator(SNIPER_ID, auctionListener);\n\t});\n\t\n\tit('notify message closed when close message received', () => {\n\t\tvar message = JSON.stringify({event: 'closed'});\n\t\ttranslator.processMessage(UNUSED_CHAT, message);\n\t\tassert(auctionListener.auctionClosed.calledOnce, 'auctionListener.auctionClosed not called once');\n\t});\n\n\tit('notifies bid details when current price message received from other bidder', () => {\n\t\tvar message = JSON.stringify({event: 'price', price:192, increment:7, bidder:'someone else'});\n\t\ttranslator.processMessage(UNUSED_CHAT, message);\n\t\tassert(auctionListener.currentPrice.calledOnce, 'auctionListener.currentPrice not called once');\n\t\tassert(auctionListener.currentPrice.calledWith(192, 7, PriceSource.fromOtherBidder), 'auctionListener.currentPrice not called with 192, 7 and from other bidder');\n\t});\n \n\tit('notifies bid details when current price message received from sniper', () => {\n\t\tvar message = JSON.stringify({event: 'price', price:234, increment:5, bidder:SNIPER_ID});\n\t\ttranslator.processMessage(UNUSED_CHAT, message);\n\t\tassert(auctionListener.currentPrice.calledOnce, 'auctionListener.currentPrice not called once');\n\t\tassert(auctionListener.currentPrice.calledWith(234, 5, PriceSource.fromSniper), 'auctionListener.currentPrice not called with 234, 5 and from sniper');\n\t});\n\n\n\tafterEach('', () => {\n\t\t\n\t});\n});"],"sourceRoot":"/source/"}